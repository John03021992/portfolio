
<?php

$cleanname = false; 

$cleanemail = false;

$cleannumber = false;

$cleansubject = false;

$cleanmessage = false;

$number = "";

$subject = "";

$name = "";

$aaa = false;

// if(isset($_POST["email"]) && $_POST["email"] != "" && isset($_POST["name"]) && $_POST["name"] != "" && isset($_POST["phone"]) && $_POST["phone"] != "" && isset($_POST["message"]) && $_POST["message"] != "" && isset($_POST["subject"]) && $_POST["subject"] != "") {



// Regex Name 

  $pattern = "/^[A-ZÄ-Ÿ-Àa-zä-ÿ\-\à\s\']+$/";
  $pattern2 = "/^([+]?\d{1,2}[-\s]?|)\d{3}[-\s]?\d{3}[-\s]?\d{4}$/";


if (!preg_match($pattern,$_POST['name']) || empty($_POST['name'])){
         echo "Wrong name"; 
            
        }

    



// Regex E-mail 




if (!filter_var(
        $_POST["email"],
        FILTER_VALIDATE_EMAIL
        
    )|| empty($_POST['email']))
        
        {
         echo "Wrong E-mail";
        }
   

        // Regex Number



  
if (!preg_match($pattern2,$_POST['phone']) || empty($_POST['phone'])
        ) 
        {  
              echo "Wrong number";
        }

        else {
    $name = $_POST['name'];
            $cleanname = true;

    $number = $_POST['phone'];
            $cleannumber = true;

    $email = $_POST['email'];
            $cleanemail = true;

    $subject = $_POST['subject'];
            $cleansubject = true;

    $message = $_POST['message'];
            $cleanmessage = true;

             echo 'Votre message a bien été envoyé'; 
mail('john432@hotmail.fr', 'un client vous a envoyé un retour dans la page contact', $name."\r\n".$email."\r\n".$number."\r\n".$subject."\r\n".$message);

        }
       





?>

